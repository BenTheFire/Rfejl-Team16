@page "/login"
@using TicketMaster.Data.DTOs;
@using TicketMaster.Data.Services.Interfaces;
@inject ILoginService ILS

<div class="login-container">
    <form @onsubmit="SubmitEvent" method="post" class="login-form">
        <h4>Login</h4>  
        <input type="text" placeholder="Username" @bind-value="Model.Username" class="input-field" />  
        <input type="password" placeholder="Password" @bind-value="Model.Password" class="input-field" />  
        <button type="submit" class="submit-button">Login</button>  
    </form>  

    @if (valid)  
    {  
        <p class="success-message">Successful login</p>  
        @if (isAdmin)  
        {  
            <p class="admin-message">(admin login)</p>  
        }
        else if (isVendor)
        {
            <p class="admin-message">(vendor login)</p>
        }
    }  
    @if (valid == false && tried == true) {
            <p class="failed-message">Login failed</p>
        }
    </div>  

@code {

    public bool valid = false;  
    public bool isAdmin = false;
    public bool isVendor = false;
    public bool tried = false;
    private LoginUserDTO Model { get; set; }

    public void SubmitEvent()
    {
        tried = true;
        valid = ILS.LoginUser(ref isAdmin, ref isVendor, Model);
    }

    protected override void OnInitialized() {  
        Model = new();  
    }
}  

<style>  
   .login-container {  
       display: flex;  
       justify-content: center;  
       align-items: center;  
       height: 100vh;  
       background-color: #f5f5f5;  
   }  

   .login-form {  
       background: white;  
       padding: 20px;  
       border-radius: 8px;  
       box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);  
       text-align: center;  
       width: 300px;  
   }  

   .input-field {  
       width: 100%;  
       padding: 10px;  
       margin: 10px 0;  
       border: 1px solid #ccc;  
       border-radius: 4px;  
   }  

   .submit-button {  
       width: 100%;  
       padding: 10px;  
       background-color: #007bff;  
       color: white;  
       border: none;  
       border-radius: 4px;  
       cursor: pointer;  
   }  

   .submit-button:hover {  
       background-color: #0056b3;  
   }  

   .success-message {  
       color: green;  
       margin-top: 10px;  
   }  

   .admin-message {  
       color: blue;  
   }  
   .failed-message {
       color: red;
   }
</style>
